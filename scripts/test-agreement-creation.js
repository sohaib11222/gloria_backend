// Test script to verify improved error handling
console.log('ðŸ§ª Testing improved error handling...');
console.log('');
console.log('âœ… Updated gRPC server error handling:');
console.log('- P2002 (Unique constraint) â†’ Code 6 with helpful message');
console.log('- Other Prisma errors â†’ Code 3 with database error message');
console.log('- Generic errors â†’ Code 13 with original message');
console.log('');
console.log('âœ… Updated REST API error handling:');
console.log('- Code 3 â†’ 400 Bad Request (INVALID_ARGUMENT)');
console.log('- Code 6 â†’ 409 Conflict (CONFLICT)');
console.log('- Other errors â†’ Pass through to error handler');
console.log('');
console.log('ðŸŽ¯ Now when you try to create an agreement with duplicate reference:');
console.log('You will get: "Agreement with reference \'AG-2025-001\' already exists for this source. Please use a different agreement_ref or update the existing agreement."');
console.log('');
console.log('ðŸ’¡ Solutions:');
console.log('1. Use a different agreement_ref (e.g., AG-2025-002)');
console.log('2. Update the existing agreement status');
console.log('3. Delete the existing agreement first');
